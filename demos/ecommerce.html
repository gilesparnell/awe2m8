<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eCommerce Demo - AWE2M8</title>
    <link rel="stylesheet" href="../css/demo-styles.css">
    <style>
        /* Two column layout for eCommerce page */
        .two-column-grid {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 15px;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            align-items: start;
        }

        .stacked-boxes {
            display: flex;
            flex-direction: column;
            gap: 15px;
            height: 100%;
        }

        .stacked-boxes .column-box:first-child {
            flex: 1;
        }

        /* Horizontal layout for Voice and SMS - FORCE */
        .horizontal-cta {
            display: flex !important;
            flex-direction: row !important;
            gap: 15px;
            margin-top: 10px;
        }

        .horizontal-cta>div {
            flex: 1;
        }

        @media (max-width: 1200px) {
            .two-column-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="header">
        <a href="https://awe2m8.ai" class="logo">
            <img src="../images/AWE2M8Logo.png" alt="AWE2M8.ai" style="height: 40px;">
        </a>
        <a href="../index.html" class="back-btn">‚Üê Back to Demos</a>
    </div>

    <div class="hero hero-compact">
        <h1 id="hero-title">üõí eCommerce AI Assistant</h1>
        <p id="hero-description">Loading...</p>
    </div>

    <div class="two-column-grid">
        <!-- Left Column: Stacked boxes -->
        <div class="stacked-boxes">
            <!-- How & Why Box -->
            <div class="column-box">
                <h3>How It Works</h3>
                <p id="how-it-works">Loading...</p>

                <h3 style="margin-top: 15px;">Why This Matters</h3>
                <p id="why-it-matters">Loading...</p>
            </div>

            <!-- Try Our AI Box -->
            <div class="column-box">
                <h2 style="margin-bottom: 12px; font-size: 1em; text-align: center;">Try Our AI</h2>

                <div class="horizontal-cta">
                    <!-- Voice Orb - LEFT -->
                    <div style="text-align: center;">
                        <h3 style="font-size: 0.85em; margin-bottom: 6px;">Voice</h3>
                        <div style="display: flex; justify-content: center; align-items: center;">
                            <iframe id="voice-iframe" src="" allow="microphone"
                                style="width: 100%; height: 100px; border: none;"></iframe>
                        </div>
                    </div>

                    <!-- SMS Button - RIGHT -->
                    <div style="text-align: center; display: flex; flex-direction: column; justify-content: center;">
                        <h3 style="font-size: 0.85em; margin-bottom: 8px;">SMS</h3>
                        <a id="sms-link" href="#" target="_blank" class="card-link"
                            style="display: inline-block; padding: 10px 20px; font-size: 0.85em;">
                            Try SMS ‚Üí
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column: Video -->
        <div class="column-box">
            <h2>Watch It In Action</h2>
            <div class="video-in-column" id="video-container">
                <iframe src="https://drive.google.com/file/d/1kFig57mEScBqXUsmVPba2yOtLJxFnU8k/preview" allow="autoplay"
                    style="width: 100%; height: 100%; border: none;"></iframe>
            </div>
        </div>
    </div>

    <script>
        // Load content from JSON file
        fetch('../content/content.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Content file not found');
                }
                return response.json();
            })
            .then(data => {
                // Get the content for this specific demo
                const content = data.ecommerce;

                // Update all the text elements
                document.getElementById('hero-title').innerHTML = `${content.emoji} ${content.title}`;
                document.getElementById('hero-description').textContent = content.heroDescription;
                document.getElementById('how-it-works').textContent = content.howItWorks;
                document.getElementById('why-it-matters').textContent = content.whyItMatters;

                // Update voice iframe URL
                if (content.iframeUrl && content.iframeUrl.trim() !== '') {
                    document.getElementById('voice-iframe').src = content.iframeUrl;
                }

                // Update SMS link URL
                if (content.demoUrl && content.demoUrl.trim() !== '') {
                    document.getElementById('sms-link').href = content.demoUrl;
                }

                // Update video if URL exists in JSON (overrides hardcoded one)
                if (content.videoUrl && content.videoUrl.trim() !== '') {
                    document.getElementById('video-container').innerHTML = `
                        <iframe 
                            src="${content.videoUrl}" 
                            style="width: 100%; height: 100%; border: none;"
                            allow="autoplay"
                        ></iframe>
                    `;
                }

                // Update page title
                document.title = `${content.title} Demo - AWE2M8`;
            })
            .catch(error => {
                console.error('Error loading content:', error);
                // Fallback content if JSON fails to load
                document.getElementById('hero-description').textContent = 'Error loading content. Please refresh the page.';
            });

        // Microphone permission handling for voice iframe
        const voiceFrame = document.getElementById('voice-iframe');
        voiceFrame.addEventListener('load', () => {
            navigator.permissions.query({ name: 'microphone' })
                .then(result => {
                    if (result.state === 'granted') {
                        console.log('Microphone access already granted');
                    } else if (result.state === 'prompt') {
                        console.log('User will be prompted for microphone access');
                    }
                });
        });
    </script>
</body>

</html>