#!/bin/sh
#
# AWE2M8 Pre-commit Hook
# This hook runs tests before allowing a commit
# Place this file in .git/hooks/pre-commit and make it executable
#

echo ""
echo "üß™ Running AWE2M8 pre-commit tests..."
echo ""

# Run the test suite
node test-runner.js --quick

# Capture the exit code
TEST_EXIT_CODE=$?

if [ $TEST_EXIT_CODE -ne 0 ]; then
    echo ""
    echo "‚ùå Pre-commit tests FAILED!"
    echo "Please fix the issues above before committing."
    echo ""
    echo "To bypass this check (not recommended), use:"
    echo "  git commit --no-verify"
    echo ""
    exit 1
fi

echo ""
echo "‚úÖ All pre-commit tests passed!"
echo ""
exit 0
